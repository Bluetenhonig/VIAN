

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>IAnalysisJob &mdash; VIAN 0.4.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="VIAN 0.4.0 documentation" href="../index.html"/>
        <link rel="up" title="Developer’s Guide" href="../DevelopersGuide.html"/>
        <link rel="next" title="IAnalysisJob Example" href="analyses_example.html"/>
        <link rel="prev" title="Developer’s Guide" href="../DevelopersGuide.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> VIAN
          

          
          </a>

          
            
            
              <div class="version">
                0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../UserGuide.html">User’s Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user_interface/user_interface.html">User Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user_interface/inspector.html">Inspector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_interface/outliner.html">Outliner</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_interface/perspectives.html">Perspectives</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user_interface/perspectives.html#player-perspective">Player Perspective</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user_interface/perspectives.html#id1">Player Perspective</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user_interface/perspectives.html#screenshots-perspective">Screenshots Perspective</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user_interface/perspectives.html#node-scripting-perspective">Node Scripting Perspective</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user_interface/timeline.html">Timeline</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../step_by_step/step_by_step.html">Step-by-Step Guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../step_by_step/project_management/project_management.html">Vian Projects</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/project_management/create_project.html">Creating new Project</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/project_management/project_templates.html">Project Templates</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/project_management/import_elan_projects.html">Importing ELAN Projects</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/project_management/changing_movie_paths.html">Changing Movie Paths</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/project_management/backups.html">Backups</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../step_by_step/segmentation/segmentation.html">Segmentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/segmentation/create_segmentation.html">Creating Segmentations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/segmentation/create_segment.html">Creating Segments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/segmentation/cutting_segments.html">Cutting Segments</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/segmentation/changing_main_segmentation.html">Changing the Main Segmentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/segmentation/locking_segmentations.html">Locking Segmentations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/segmentation/exporting_segmentations.html">Exporting Segmentations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../step_by_step/annotation/annotation.html">Annotations</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../step_by_step/screenshots/screenshots.html">Screenshots</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/screenshots/create_screenshot.html">Creating a Screenshot</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/screenshots/export_screenshots.html">Exporting Screenshots</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../step_by_step/analyses/analyses.html">Analyses</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/analyses/running_analyses.html">Running Analyses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/analyses/viewing_analyses.html">Viewing Analyses</a></li>
<li class="toctree-l4"><a class="reference internal" href="../step_by_step/analyses/analyses_list.html">All Analyses of VIAN</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../DevelopersGuide.html">Developer’s Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">IAnalysisJob</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#functionality">Functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a><ul>
<li class="toctree-l4"><a class="reference internal" href="analyses_example.html">IAnalysisJob Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="nodes.html">Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html">Plug-Ins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../DevelopersGuide.html#deciding-which-interface-to-use">Deciding which Interface to use</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What’s New</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../whats_new/latest.html">VIAN 0.4.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../whats_new/latest.html#cutting-segments">Cutting Segments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../whats_new/latest.html#extensive-list">Extensive List</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../whats_new/0_4_2/0_4_2.html">VIAN 0.4.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../whats_new/0_4_2/0_4_2.html#perspectives">Perspectives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../whats_new/0_4_2/0_4_2.html#changing-the-video-source">Changing the Video-Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="../whats_new/0_4_2/0_4_2.html#annotation-are-time-independent-from-their-layer">Annotation are Time-Independent from their Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../whats_new/0_4_2/0_4_2.html#extensive-list">Extensive List</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">VIAN</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../DevelopersGuide.html">Developer’s Guide</a> &raquo;</li>
        
      <li>IAnalysisJob</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/dev_guide/analyses.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ianalysisjob">
<span id="id1"></span><h1>IAnalysisJob<a class="headerlink" href="#ianalysisjob" title="Permalink to this headline">¶</a></h1>
<p>To implement your own Analysis, subclass the IAnalysisJob Interface and add your class into the
<em>extension/analysis/your_package/</em> folder.
Your analysis will then automatically appear in the Analysis/Extensions Menu of the MainWindow.</p>
<div class="section" id="functionality">
<h2>Functionality<a class="headerlink" href="#functionality" title="Permalink to this headline">¶</a></h2>
<p>Once the user has triggered the Button in the MainWindow menu, following process will take place:</p>
<p><strong>Analysis</strong></p>
<ol class="arabic simple">
<li>A Dialog Appears where the user can select all targets and additional Parameters defined by your function.</li>
<li>On Accept, the analysis will take place as follows:</li>
</ol>
<p>3.1 <strong>IAnalysisJob.prepare()</strong> will be performed, where you will pack all information needed into a list.</p>
<p>3.2 <strong>IAnalysisJob.process()</strong> will be performed in an external Thread. All information packed in the last step will be available for you, and no more!</p>
<p>3.3 <strong>IAnalysisJob.modify_project()</strong> Once the process() function has finished the Thread will be destroyed and the your result will be sent back to the Main-Thread into the IAnalysisJob.modify_project() function. Here you can perform any modifications to the Project if necessary.</p>
<ol class="arabic simple" start="4">
<li>You Analysis will be stored in the Project</li>
</ol>
<p><strong>Visualization</strong></p>
<p>If the user triggers the Visualization, a new QMainWindow or a Webbrower will be opened and all results of your analysis will be
handed to the widget, or url in case of a webbrowser.</p>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="../_images/ianalysisparameterwidget.png"><img alt="map to buried treasure" src="../_images/ianalysisparameterwidget.png" style="width: 555.0px; height: 562.0px;" /></a>
<p class="caption"><span class="caption-text">The AnalysisDialog, note the Widget beneath <em>Parameters</em> is returned by IAnalysisJob.get_parameter_widget()</span></p>
</div>
<p><strong>IAnalysisJob.get_preview()</strong></p>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="../_images/analysis_preview.png"><img alt="map to buried treasure" src="../_images/analysis_preview.png" style="width: 453.0px; height: 652.0px;" /></a>
<p class="caption"><span class="caption-text">The Preview Widget as shown in the Inspector when an Analysis is selected. Here as a QWebView</span></p>
</div>
<dl class="class">
<dt id="core.data.interfaces.IAnalysisJob">
<em class="property">class </em><code class="descclassname">core.data.interfaces.</code><code class="descname">IAnalysisJob</code><span class="sig-paren">(</span><em>name</em>, <em>source_types</em>, <em>help_path=''</em>, <em>author='No Author'</em>, <em>version='0.0.1'</em>, <em>multiple_result=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/core/data/interfaces.html#IAnalysisJob"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.data.interfaces.IAnalysisJob" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the BaseClass for all Analyses. 
Subclass it to implement your own Analyses.</p>
<dl class="method">
<dt id="core.data.interfaces.IAnalysisJob.get_parameter_widget">
<code class="descname">get_parameter_widget</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/core/data/interfaces.html#IAnalysisJob.get_parameter_widget"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.data.interfaces.IAnalysisJob.get_parameter_widget" title="Permalink to this definition">¶</a></dt>
<dd><p>If your Analysis has additional parameters which can be set by the User, Subclass the ParameterWidget, 
and return it in this Function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A Subclass of ParameterWidget</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.data.interfaces.IAnalysisJob.get_preview">
<code class="descname">get_preview</code><span class="sig-paren">(</span><em>analysis</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/core/data/interfaces.html#IAnalysisJob.get_preview"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.data.interfaces.IAnalysisJob.get_preview" title="Permalink to this definition">¶</a></dt>
<dd><p>The Preview should be a visual representation of your analysis data, which can be displayed in the 
Inspector, when the Analysis is selected.</p>
<p>Make sure, that the creation of this widget should be fast.
Easiest would be to render your data into an Image, convert it into a qpixamp and 
attach it to a QLabel using QLabel(your_pixmap).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>analysis</strong> – The IAnalysisJobAnalysis Object created in IAnalysisJob.process()</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A QWidget serving as a preview</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.data.interfaces.IAnalysisJob.get_visualization">
<code class="descname">get_visualization</code><span class="sig-paren">(</span><em>analysis</em>, <em>result_path</em>, <em>data_path</em>, <em>project</em>, <em>main_window</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/core/data/interfaces.html#IAnalysisJob.get_visualization"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.data.interfaces.IAnalysisJob.get_visualization" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is called by VIAN if the User wants to display the complete Visualization of the Data. 
While you may essentially use any type Type of Visualization, you should either:</p>
<ol class="arabic">
<li><p class="first">subclass QMainWindow and implement your visualization into it.</p>
</li>
<li><p class="first">if you use a WebBased visualization use</p>
<blockquote>
<div><p>save your visualitations into the results/ directory of the project
during the IAnalysisJob.modify_project() or IAnalysisJob.process()</p>
<p>and in this function:
import webbrowser
webbrowser.open(url/to/your/result.html)</p>
</div></blockquote>
</li>
</ol>
<p>When using a QMainWindow, don’t forget to call QMainWindow.show() at the end of your __init__()</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>analysis</strong> – The IAnalysisJobAnalysis Object created in IAnalysisJob.process()</li>
<li><strong>result_path</strong> – The Path to the results directory of the project</li>
<li><strong>data_path</strong> – The Path to the data directory of the project</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A QWidget which will be added to the Visualizations Tab</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.data.interfaces.IAnalysisJob.modify_project">
<code class="descname">modify_project</code><span class="sig-paren">(</span><em>project</em>, <em>result</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/core/data/interfaces.html#IAnalysisJob.modify_project"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.data.interfaces.IAnalysisJob.modify_project" title="Permalink to this definition">¶</a></dt>
<dd><p>If your Analysis should perform any modifications to the project, except storing the analysis,
this is the place to perform them.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>project</strong> – The Current Project to perform modifications on</li>
<li><strong>result</strong> – The resulting AnalysisJobAnalysis as returned from IAnalysisJob.process()</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.data.interfaces.IAnalysisJob.prepare">
<code class="descname">prepare</code><span class="sig-paren">(</span><em>project</em>, <em>targets</em>, <em>parameters</em>, <em>fps</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/core/data/interfaces.html#IAnalysisJob.prepare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.data.interfaces.IAnalysisJob.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>A step that should be performed in the main-thread before the processing takes place. 
This is a good point to fetch all necessary data from the project and pack it to your needs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>project</strong> – The current Project</li>
<li><strong>targets</strong> – The Target IProjectContainer Objects</li>
<li><strong>parameters</strong> – Additional Parameters as returned from your ParameterWidget.get_parameters()</li>
<li><strong>fps</strong> – The FPS of the Movie. (This is used to convert Timestamps into Frame-Position)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A List of packed Data which will be handed to the IAnalysisJob.process()</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.data.interfaces.IAnalysisJob.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>args</em>, <em>sign_progress</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/core/data/interfaces.html#IAnalysisJob.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#core.data.interfaces.IAnalysisJob.process" title="Permalink to this definition">¶</a></dt>
<dd><p>The Processing function, this will be executed in a seperate thread. 
Make sure to <strong>NOT</strong> use the ProjectContainers within this Operation.</p>
<p>Also, for User-Convenience call the sign_progress function regularilly to indicate the current progress:</p>
<p><em>Example</em>:
progress is a number E [0.0, … , 1.0]
sign_progress(0.5)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>args</strong> – the Arguments as packed in IAnalysisJob.prepare()</li>
<li><strong>sign_progress</strong> – a function to signal the current Progress. usage: sign_progress(float E[0.0,..1.0])</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">AnalysisJobAnalysis Object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="analyses_example.html">IAnalysisJob Example</a></li>
</ul>
</div>
<ul class="simple">
<li>:ref:’_IAnalysisJobExample’</li>
<li><a class="reference internal" href="../genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="../py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li>:ref:<a href="#id2"><span class="problematic" id="id3">`</span></a>search`cd _docs</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="analyses_example.html" class="btn btn-neutral float-right" title="IAnalysisJob Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../DevelopersGuide.html" class="btn btn-neutral" title="Developer’s Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Gaudenz Halter.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.4.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>