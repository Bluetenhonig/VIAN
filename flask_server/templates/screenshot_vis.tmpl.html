{% extends 'base.tmpl.html' %}
{% block header %}
<!--  <h1>{% block title %}Register{% endblock %}</h1>-->
{% endblock %}

{% block content %}
<nav>
  <div class="nav nav-tabs" id="nav-tab" role="tablist">
    <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">AB-Plane</a>
    <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">Color-dT</a>
    <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-contact" role="tab" aria-controls="nav-contact" aria-selected="false">Colorspace 3D</a>
    <a class="nav-item nav-link" id="nav-settings-tab" data-toggle="tab" href="#nav-settings" role="tab" aria-controls="nav-settings" aria-selected="false">Settings</a>
  </div>
</nav>
<div class="tab-content" id="nav-tabContent">
  <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
    <div style="padding: 20px;">
      <div id="ab-color" style="width:100%; height:100%">
      </div>
    </div>
   
  </div>
  <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
    <div style="padding: 5px;">
      <div id="dt-color" style="width:100%; height:100%">
      </div>
  </div>
  </div>
  <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
    <div style="padding: 5px;">
    <div id="renderframe"  style="width:100%; height:100%">
      <canvas id="palette-3d" style="width:100%; height:100%"></canvas>
    </div>
<!--    {% include "color_3d.tmpl.html" %}-->
  </div>
  <div class="tab-pane fade" id="nav-settings" role="tabpanel" aria-labelledby="nav-settings-tab">
    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Background Color
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <a id="setting-bg-white" class="dropdown-item" href="#">White</a>
        <a id="setting-bg-black" class="dropdown-item" href="#">Dark Gray</a>
      </div>
    </div>
  </div>

</div>
{% endblock %}

{% block script %}
<script src="/static/color_ab.js"></script>
<script src="/static/color_dt.js"></script>

<script>
  var color_ab_plot = null; 
  var color_dt_plot = null; 

  $( document ).ready(function() {
        color_ab_plot = new ColorAB("ab-color");
        color_dt_plot = new ColorDT("dt-color");

        color_ab_plot.poll(1000);
        color_dt_plot.poll(1000);

    });

  $("#setting-bg-white").on("click", function(){
    color_ab_plot.setBackgroundColor(255,255,255);
    color_ab_plot.setBackgroundColor(255,255,255);
  })
  
  $("#setting-bg-black").on("click", function(){
    color_ab_plot.setBackgroundColor(17,17,17);
    color_ab_plot.setBackgroundColor(17,17,17);
  })

</script>

<script type="module">
  import * as RENDERER from '/static/threeJsPlot2.js';
  console.log(RENDERER)
  var plot = new RENDERER.ThreeJSView("palette-3d", "renderframe")
  // RENDERER.initScene(env_lines, "palette-3d", "renderframe");
  plot.animate(env_lines)

</script>
{% endblock %}